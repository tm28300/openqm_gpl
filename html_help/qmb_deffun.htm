<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- saved from url=(0029)http://www.helpandmanual.com/ -->
<head><script type="text/javascript" src="helpman_topicinit.js"></script>
<!-- Redirect browser to frame page if page is not in the content frame. -->
<script type="text/javascript">
<!--
if(top.frames.length==0) { top.location.href="index.html?qmb_deffun.htm"; }
else { parent.quicksync('a7.5.61'); }
//-->
</script>
<script type="text/javascript" src="highlight.js"></script>
   <title>DEFFUN</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="DEFFUN" />
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;" onload="highlight();">
<div id="hmpopupDiv" style="visibility:hidden; position:absolute; z-index:1000; "></div>


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#649CCC">
  <tr valign="middle">
    <td align="left">
      <p class="p_Heading1"><span class="f_Heading1">DEFFUN</span></p>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="_.htm"><img src="top.gif" border=0 alt="Top"></a>&nbsp;
     <a href="qmb_decrypt.htm"><img src="previous.gif" border=0 alt="Previous"></a>&nbsp;
     <a href="qmb_del.htm"><img src="next.gif" border=0 alt="Next"></a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">The </span><span style="font-weight: bold; color: #000000;">DEFFUN</span><span style="color: #000000;"> statement defines a function.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold; color: #000000;">Format</span></p>
<p><span style="font-weight: bold; color: #000000;">&nbsp;</span></p>
<p style="margin: 0px 0px 0px 30px;"><span style="font-weight: bold; color: #000000;">DEFFUN</span><span style="color: #000000;"> </span><span style="font-style: italic; color: #000000;">name</span><span style="color: #000000;"> {</span><span style="font-weight: bold; color: #000000;">(</span><span style="font-style: italic; color: #000000;">arg1</span><span style="color: #000000;"> {</span><span style="font-weight: bold; color: #000000;">,</span><span style="font-style: italic; color: #000000;">arg2</span><span style="color: #000000;"> ...}</span><span style="font-weight: bold; color: #000000;">)</span><span style="color: #000000;">} {</span><span style="font-weight: bold; color: #000000;">CALLING &quot;</span><span style="font-style: italic; color: #000000;">subr</span><span style="font-weight: bold; color: #000000;">&quot;</span><span style="color: #000000;"> | </span><span style="font-weight: bold; color: #000000;">LOCAL</span><span style="color: #000000;">} {</span><span style="font-weight: bold; color: #000000;">VAR.ARGS</span><span style="color: #000000;">} {</span><span style="font-weight: bold; color: #000000;">KEY</span><span style="color: #000000;"> </span><span style="font-style: italic; color: #000000;">key</span><span style="color: #000000;">}</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">where</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 30px;"><table border="0" cellpadding="0" cellspacing="0" style="line-height: normal;"><tr style="vertical-align:baseline" valign="baseline"><td width="120"><span style="font-style: italic; color: #000000;">name</span></td><td><span style="color: #000000;">is the name of the function.</span></td></tr></table></div><p style="text-indent: -120px; margin: 0px 0px 0px 150px;"><span style="color: #000000;">&nbsp;</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 30px;"><table border="0" cellpadding="0" cellspacing="0" style="line-height: normal;"><tr style="vertical-align:baseline" valign="baseline"><td width="120"><span style="font-style: italic; color: #000000;">arg1, arg2...</span></td><td><span style="color: #000000;">are the function arguments.</span></td></tr></table></div><p style="text-indent: -120px; margin: 0px 0px 0px 150px;"><span style="color: #000000;">&nbsp;</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 30px;"><table border="0" cellpadding="0" cellspacing="0" style="line-height: normal;"><tr style="vertical-align:baseline" valign="baseline"><td width="120"><span style="font-style: italic; color: #000000;">subr</span></td><td><span style="color: #000000;">is the catalogue name of the subroutine if different from </span><span style="font-style: italic; color: #000000;">name</span><span style="color: #000000;">.</span></td></tr></table></div><p style="text-indent: -120px; margin: 0px 0px 0px 150px;"><span style="color: #000000;">&nbsp;</span></p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 30px;"><table border="0" cellpadding="0" cellspacing="0" style="line-height: normal;"><tr style="vertical-align:baseline" valign="baseline"><td width="120"><span style="font-style: italic; color: #000000;">key</span></td><td><span style="color: #000000;">is a key value to be passed into the subroutine as described below.</span></td></tr></table></div><p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">The </span><span style="font-weight: bold; color: #000000;">DEFFUN</span><span style="color: #000000;"> statement defines a function that may be called from within the program. The </span><span style="font-weight: bold; color: #000000;">DEFFUN</span><span style="color: #000000;"> statement must appear before the first reference to the function. If the function </span><span style="font-style: italic; color: #000000;">name</span><span style="color: #000000;"> matches the name of a built in function, any references to </span><span style="font-style: italic; color: #000000;">name</span><span style="color: #000000;"> before the </span><span style="font-weight: bold; color: #000000;">DEFFUN</span><span style="color: #000000;"> will call the intrinsic function and references after the </span><span style="font-weight: bold; color: #000000;">DEFFUN</span><span style="color: #000000;"> will call the declared function.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">If the </span><span style="font-weight: bold; color: #000000;">LOCAL</span><span style="color: #000000;"> keyword is not present, the function must correspond to a catalogued item. A call to this function call is effectively translated to a call to a subroutine with an additional hidden first argument through which the result is returned. The optional </span><span style="font-weight: bold; color: #000000;">CALLING</span><span style="color: #000000;"> component of the </span><span style="font-weight: bold; color: #000000;">DEFFUN</span><span style="color: #000000;"> statement allows the catalogue name of the function to be different from the </span><span style="font-style: italic; color: #000000;">name</span><span style="color: #000000;"> of the function itself.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">Use of the </span><span style="font-weight: bold; color: #000000;">LOCAL</span><span style="color: #000000;"> keyword indicates that this function is internal to the program module and will be defined later in the source by use of the </span><span style="font-weight: bold; color: #000000;"><a href="qmb_local.htm">LOCAL FUNCTION</a></span><span style="color: #000000;"> statement.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">The argument names used in the </span><span style="font-weight: bold; color: #000000;">DEFFUN</span><span style="color: #000000;"> statement are for documentation purposes only and have no significance within the program except that the compiler counts them to verify correct use of the function. The variables used in the actual call to the function are determined by the use of the function. An argument may be defined to be a whole matrix in which case it should be prefixed by the keyword </span><span style="font-weight: bold; color: #000000;">MAT</span><span style="color: #000000;"> in the </span><span style="font-weight: bold; color: #000000;">DEFFUN</span><span style="color: #000000;"> argument list.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">The function is used in the same way as the intrinsic functions described in this manual. Although it is not recommended, a function can update its argument variables.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">The </span><span style="font-weight: bold; color: #000000;">VAR.ARGS</span><span style="color: #000000;"> option indicates that compiler should not check the number of arguments in calls to the function. It is of use with functions that take variable length argument lists. This option cannot be used with local function.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">The </span><span style="font-weight: bold; color: #000000;">KEY</span><span style="color: #000000;"> option passes the </span><span style="font-style: italic; color: #000000;">key</span><span style="color: #000000;"> value as an additional argument before the first one named in calls to the function. This enables construction of multiple functions that call a single catalogued item with a mode key as the first argument. The </span><span style="font-weight: bold; color: #000000;"><a href="qmbs_pcl.htm">!PCL()</a></span><span style="color: #000000;"> function provided in the BP file of the QMSYS account uses this feature to implement the various PCL functions defined in the SYSCOM PCL.H include record.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold; color: #000000;">Example</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p style="margin: 0px 0px 0px 30px;"><span style="font-family: 'Courier New'; color: #000000;">DEFFUN MATMAX(MAT A)</span></p>
<p style="margin: 0px 0px 0px 30px;"><span style="font-family: 'Courier New'; color: #000000;">DIM VALUES(100)</span></p>
<p style="margin: 0px 0px 0px 30px;"><span style="font-family: 'Courier New'; color: #000000;">...</span></p>
<p style="margin: 0px 0px 0px 30px;"><span style="font-family: 'Courier New'; color: #000000;">MAX = MATMAX(MAT VALUES)</span></p>
<p><span style="font-family: 'Courier'; color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">The program fragment above uses the MATMAX() function to find the maximum value of all the elements of matrix VALUES.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">&nbsp;</span><br>
<span style="font-weight: bold; color: #000000;">See also:</span></p>
<p><span style="font-weight: bold; color: #000000;"><a href="qmb_function.htm">FUNCTION</a></span><span style="color: #000000;">, </span><span style="font-weight: bold; color: #000000;"><a href="qmb_local.htm">LOCAL</a></span></p>

</td></tr></table>

</body>
</html>
